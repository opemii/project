<<<<<<< HEAD
on: 2.1

jobs:
    build:
          docker:
                  - image: cimg/node:current
                        steps:
                                - checkout

                                        # Restore previous node package cache if there is one
                                        #       - restore_cache:
                                        #                 key: node-{{ checksum "package-lock.json" }}
                                        #
                                        #                       # Install or update packages
                                        #                             - run: npm ci
                                        #
                                        #                                   # Save cache
                                        #                                         - save_cache:
                                        #                                                   key: node-{{ checksum "package-lock.json" }}
                                        #                                                             paths:
                                        #                                                                         - ~/.npm
                                        #
                                        #                                                                               # Store project files for the next job
                                        #                                                                                     - persist_to_workspace:
                                        #                                                                                               root: ~/
                                        #                                                                                                         paths:
                                        #                                                                                                                     - project
                                        #
                                        #                                                                                                                       test:
                                        #                                                                                                                           docker:
                                        #                                                                                                                                 - image: cimg/node:current
                                        #
                                        #                                                                                                                                     steps:
                                        #                                                                                                                                           # Start with the initial build
                                        #                                                                                                                                                 - attach_workspace:
                                        #                                                                                                                                                           at: ~/
                                        #
                                        #                                                                                                                                                                 # Install Testmo CLI tool
                                        #                                                                                                                                                                       - run: npm install --no-save @testmo/testmo-cli
                                        #
                                        #                                                                                                                                                                             # Optionally add a couple of fields such as the git hash and link to the build
                                        #                                                                                                                                                                                   - run:
                                        #                                                                                                                                                                                             command: |
                                        #                                                                                                                                                                                                         npx testmo automation:resources:add-field --name git --type string \
                                        #                                                                                                                                                                                                                       --value ${CIRCLE_SHA1:0:7} --resources resources.json
                                        #                                                                                                                                                                                                                                   npx testmo automation:resources:add-link --name build \
                                        #                                                                                                                                                                                                                                                 --url $CIRCLE_BUILD_URL --resources resources.json
                                        #                                                                                                                                                                                                                                                       # Run tests and report results to Testmo
                                        #                                                                                                                                                                                                                                                             - run:
                                        #                                                                                                                                                                                                                                                                       command: |
                                        #                                                                                                                                                                                                                                                                                   npx testmo automation:run:submit \
                                        #                                                                                                                                                                                                                                                                                                 --instance $TESTMO_URL \
                                        #                                                                                                                                                                                                                                                                                                               --project-id 1 \
                                        #                                                                                                                                                                                                                                                                                                                             --name "Mocha test run" \
                                        #                                                                                                                                                                                                                                                                                                                                           --source "unit-tests" \
                                        #                                                                                                                                                                                                                                                                                                                                                         --resources resources.json \
                                        #                                                                                                                                                                                                                                                                                                                                                                       --results results/*.xml \
                                        #                                                                                                                                                                                                                                                                                                                                                                                     -- npm run mocha-junit # Note space after --
                                        #                                                                                                                                                                                                                                                                                                                                                                                           # Store test artifacts and results
                                        #                                                                                                                                                                                                                                                                                                                                                                                                 - store_artifacts:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                           path: results
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                     destination: test_results
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                           - store_test_results:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                     path: results
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                     workflows:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                       version: 2
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                         full:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                             jobs:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                   - build
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                         - test:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                   requires:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                               - build
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         context:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     - testmoversion: 2.1
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     jobs:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       build:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           docker:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 - image: cimg/node:current
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     steps:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           - checkout
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 # Restore previous node package cache if there is one
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       - restore_cache:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 key: node-{{ checksum "package-lock.json" }}
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       # Install or update packages
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             - run: npm ci
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   # Save cache
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         - save_cache:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   key: node-{{ checksum "package-lock.json" }}
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             paths:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         - ~/.npm
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               # Store project files for the next job
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     - persist_to_workspace:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               root: ~/
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         paths:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     - project
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       test:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           docker:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 - image: cimg/node:current
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     steps:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           # Start with the initial build
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 - attach_workspace:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           at: ~/
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 # Install Testmo CLI tool
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       - run: npm install --no-save @testmo/testmo-cli
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             # Optionally add a couple of fields such as the git hash and link to the build
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   - run:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             command: |
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         npx testmo automation:resources:add-field --name git --type string \
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       --value ${CIRCLE_SHA1:0:7} --resources resources.json
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   npx testmo automation:resources:add-link --name build \
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 --url $CIRCLE_BUILD_URL --resources resources.json
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       # Run tests and report results to Testmo
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             - run:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       command: |
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   npx testmo automation:run:submit \
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 --instance $TESTMO_URL \
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               --project-id 1 \
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             --name "Mocha test run" \
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           --source "unit-tests" \
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         --resources resources.json \
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       --results results/*.xml \
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     -- npm run mocha-junit # Note space after --
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           # Store test artifacts and results
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 - store_artifacts:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           path: results
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     destination: test_results
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           - store_test_results:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     path: results
                                        #
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     workflows:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       version: 2
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         full:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             jobs:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   - build
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         - test:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   requires:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               - build
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         context:
                                        #                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     - testmo
=======
# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs
jobs:
  say-hello:
    # Specify the execution environment. You can specify an image from Dockerhub or use one of our Convenience Images from CircleCI's Developer Hub.
    # See: https://circleci.com/docs/2.0/configuration-reference/#docker-machine-macos-windows-executor
    docker:
      - image: circleci/node:10
    # Add steps to the job
    # See: https://circleci.com/docs/2.0/configuration-reference/#steps
    steps:
      - checkout
      - run:
          name: sa
          command: |
            npm install --save
      - run:
          name: saye
          command: |
            ./node_modules/mocha/bin/mocha test/ --reporter mochawesome --reporter-options reportDir=test-results,reportFilename=test-results
      - store_test_results:
          path: test-results
      - store_artifacts:
          path: test-results 
            
        

# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  build_test:
    jobs:
      - run_tests
>>>>>>> 9cb5736f42b4c85154565f2eeef2da3220076fbd
